package com.example.wifi_pentester.ui.wifi.dialogs

import android.app.Dialog
import android.content.Intent
import android.os.Bundle
import android.view.View
import androidx.databinding.DataBindingUtil.inflate
import com.example.wfc_models.wifi.scanners.data_models.Wifi
import com.example.wifi_pentester.R
import com.example.wifi_pentester.databinding.SelectingTheConnectionTypeDialogBinding
import com.example.wifi_pentester.ui.wifi_pentesting.CrackWifiActivity
import com.example.wifi_pentester.utils.diallogs.DialogWithParcelableDataBase

class SelectingTheConnectionTypeDialog : DialogWithParcelableDataBase<Wifi>() {
    override val dataKey: String = "dataKey_${this.javaClass.name}"
    override val dialogTag: String = this.javaClass.name

    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {
        val dialogBinding: SelectingTheConnectionTypeDialogBinding =
            inflate(layoutInflater, R.layout.selecting_the_connection_type_dialog, null, false)

        val wifi = parcelableData
        dialogBinding.wifi = wifi

        dialogBinding.connectUsAWpsPinButton.setOnClickListener { v: View? ->
            ConnectUsPasswordDialog.newInstance(wifi, TypeDialog.Wps)
                .show(requireActivity().supportFragmentManager, "connectUsWps")
        }

        dialogBinding.connectUsAPasswordButton.setOnClickListener { v: View? ->
            ConnectUsPasswordDialog.newInstance(wifi, TypeDialog.Password)
                .show(requireActivity().supportFragmentManager, "connectUsAPassword")
        }

        dialogBinding.connectUsBruteWpsAttackButton.setOnClickListener { v: View? -> }

        dialogBinding.connectUsPixieDustAttackButton.setOnClickListener { v: View? ->
            val intent = Intent(context, CrackWifiActivity::class.java)
            intent.putExtra("Wifi", wifi)
            startActivity(intent)
        }

        return onCreateDialog(dialogBinding.root)
    }
}