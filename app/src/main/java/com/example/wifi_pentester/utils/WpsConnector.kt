package com.example.wifi_pentester.utils

import android.content.Context
import android.net.wifi.WifiManager
import android.net.wifi.WpsInfo
import com.example.wifi_pentester.data.Wifi

class WpsConnector private constructor(context: Context) {
    var wifiManager: WifiManager
    fun connectWithWps(wifi: Wifi, pin: String?) {
        connectWithWps(wifi.mac, pin)
    }

    fun connectWithWps(bssid: String?, pin: String?) {
        val wpsInfo = WpsInfo()
        wpsInfo.BSSID = bssid
        wpsInfo.pin = pin
        wifiManager.startWps(wpsInfo, null)
    }

    companion object {
        var instance: WpsConnector? = null
        fun getInstance(context: Context): WpsConnector? {
            if (instance == null) {
                instance = WpsConnector(context)
            }
            return instance
        }
    }

    init {
        wifiManager = context.getSystemService(Context.WIFI_SERVICE) as WifiManager
    }
}