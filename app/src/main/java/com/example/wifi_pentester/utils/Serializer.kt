package com.example.wifi_pentester.utils

import android.content.Context
import java.io.*

object Serializer {
    @JvmStatic
    fun <T : Serializable?> Serialize(value: T, fileName: String?, context: Context) {
        try {
           FileOutputStream(String.format("%s/%s", context.cacheDir.path, fileName)).use { fileOutput ->
                ObjectOutputStream(fileOutput).use { objectOutputStream ->
                    objectOutputStream.writeObject(value)
                }
            }
        } catch (ex: Exception) {
            ex.printStackTrace()
        }
    }

    fun <T : Serializable?> Deserialize(fileName: String?, context: Context): T? {
        return try {
            FileInputStream(String.format("%s/%s", context.cacheDir.path, fileName)).use { fileInputStream ->
                ObjectInputStream(fileInputStream).use { objectInputStream ->
                    val result = objectInputStream.readObject() as T?
                    return result;
                }
            }
        } catch (ex: Exception) {
            ex.printStackTrace()
            null
        }
    }
}