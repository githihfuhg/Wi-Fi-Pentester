<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android = "http://schemas.android.com/apk/res/android"
    xmlns:app = "http://schemas.android.com/apk/res-auto"
    xmlns:tools = "http://schemas.android.com/tools">

    <data>
        <import type = "android.view.View"/>
        <variable
            name = "viewModel"
            type = "com.example.wifi_pentester.view_models.password_recovery.PasswordListViewModel"/>

        <variable
            name = "adapter"
            type = "com.example.wifi_pentester.ui.password_recovery.adapters.RecoveredWiFiListAdapter"/>
    </data>

    <RelativeLayout
        android:layout_width = "match_parent"
        android:layout_height = "match_parent">

        <androidx.constraintlayout.widget.ConstraintLayout
            android:id = "@+id/password_recovery_menu_layout"
            android:layout_width = "match_parent"
            android:layout_height = "60dp"
            app:goneIf="@{viewModel.process}">

            <androidx.appcompat.widget.SearchView
                android:id = "@+id/searchView"
                android:layout_width = "wrap_content"
                android:layout_height = "wrap_content"
                android:layout_marginStart = "10dp"
                android:iconifiedByDefault = "false"
                android:maxWidth = "270dp"
                android:maxHeight= "50dp"
                app:layout_constraintBottom_toBottomOf = "parent"
                app:layout_constraintStart_toStartOf = "parent"
                app:layout_constraintTop_toTopOf = "parent"
                app:searchIcon = "@drawable/ic_search"
                app:onSearchViewChangeTextListener="@{(x)-> viewModel.filter(x)}"
                />

            <ImageButton
                android:id = "@+id/open_passwords_imageButton"
                android:layout_width = "40dp"
                android:layout_height = "40dp"
                android:layout_marginEnd = "10dp"
                android:background = "@drawable/image_button_shape_selector"
                android:clickable = "true"
                android:focusable = "true"
                app:goneIf="@{viewModel.isPasswordReadingError}"
                app:layout_constraintBottom_toBottomOf = "parent"
                app:layout_constraintEnd_toStartOf = "@+id/save_passwords_imageButton"
                app:layout_constraintTop_toTopOf = "parent"
                app:srcCompat = "@drawable/ic_save"
                app:tint = "@color/purple"/>

            <ImageButton
                android:id = "@+id/save_passwords_imageButton"
                android:layout_width = "40dp"
                android:layout_height = "40dp"
                android:layout_marginEnd = "15dp"
                android:background = "@drawable/image_button_shape_selector"
                android:clickable = "true"
                android:focusable = "true"
                app:layout_constraintBottom_toBottomOf = "parent"
                app:layout_constraintEnd_toEndOf = "parent"
                app:layout_constraintTop_toTopOf = "parent"
                app:srcCompat = "@drawable/ic_folder_open"
                app:tint = "@color/purple"/>

        </androidx.constraintlayout.widget.ConstraintLayout>


        <com.google.android.material.divider.MaterialDivider
            android:id = "@+id/password_recovery_divider"
            android:layout_width = "match_parent"
            android:layout_height = "wrap_content"
            android:layout_below = "@+id/password_recovery_menu_layout"
            tools:ignore = "MissingConstraints"/>

        <androidx.constraintlayout.widget.ConstraintLayout
            android:id = "@+id/password_recovery_content_layout"
            android:layout_width = "match_parent"
            android:layout_height = "match_parent"
            android:layout_below = "@+id/password_recovery_divider">

            <androidx.recyclerview.widget.RecyclerView
                android:id = "@+id/password_list_recycler_view"
                android:layout_width = "match_parent"
                android:layout_height = "match_parent"
                android:layoutAnimation = "@anim/layout_animation_fall_down"
                app:layoutManager = "androidx.recyclerview.widget.LinearLayoutManager"
                app:adapter="@{adapter}"
                app:layout_constraintBottom_toBottomOf = "parent"
                app:layout_constraintEnd_toEndOf = "parent"
                app:layout_constraintStart_toStartOf = "parent"
                app:layout_constraintTop_toTopOf = "parent"
                tools:listitem = "@layout/password_list_item"/>

            <ProgressBar
                android:id = "@+id/progressBar"
                android:layout_width = "wrap_content"
                android:layout_height = "wrap_content"
                app:goneIf="@{!viewModel.process}"
                app:layout_constraintBottom_toBottomOf = "parent"
                app:layout_constraintEnd_toEndOf = "parent"
                app:layout_constraintStart_toStartOf = "parent"
                app:layout_constraintTop_toTopOf = "parent"/>

            <TextView
                android:layout_width = "wrap_content"
                android:layout_height = "wrap_content"
                android:text = "@string/passwords_not_found_error"
                app:goneIf="@{!viewModel.isWifiNotFound}"
                app:layout_constraintBottom_toBottomOf = "parent"
                app:layout_constraintEnd_toEndOf = "parent"
                app:layout_constraintStart_toStartOf = "parent"
                app:layout_constraintTop_toTopOf = "parent">
            </TextView>

        </androidx.constraintlayout.widget.ConstraintLayout>

    </RelativeLayout>
</layout>