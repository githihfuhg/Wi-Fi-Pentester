package com.example.wfc_models.wifi.information

import android.Manifest
import android.content.Context
import android.content.pm.PackageManager
import android.net.wifi.WifiManager
import android.os.Build
import androidx.core.app.ActivityCompat
import dagger.hilt.android.qualifiers.ApplicationContext
import javax.inject.Inject

class WifiInformationService @Inject constructor(
    private val _wifiManager: WifiManager,
    @ApplicationContext private val _context: Context
) : IWifiInformationService {
    override val isWifiEnabled: Boolean
        get() {
            return _wifiManager.isWifiEnabled
        }

    override val is5gzAvailable: Boolean
        get() {
            return _wifiManager.is5GHzBandSupported
        }

    override val is6gzAvailable: Boolean
        get() {
            return if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.R) {
                _wifiManager.is6GHzBandSupported
            } else {
                false
            }
        }

    override val hasWifiScanningPermissions: Boolean
        get() {
            val accessFineLocationPermissionKey = ActivityCompat
                .checkSelfPermission(_context, Manifest.permission.ACCESS_FINE_LOCATION)

            val accessCoarseLocationPermissionKey = ActivityCompat
                .checkSelfPermission(_context, Manifest.permission.ACCESS_COARSE_LOCATION)

            return accessFineLocationPermissionKey == PackageManager.PERMISSION_GRANTED ||
                    accessCoarseLocationPermissionKey == PackageManager.PERMISSION_GRANTED
        }
}
