package com.example.wfc_models.location

import android.content.Context
import android.os.Build
import android.provider.Settings
import javax.inject.Inject


// ToDo: вынести во view слой
class LocationInformationService @Inject constructor(
    private val _context: Context
) : ILocationInformationService {

    override val isLocationEnabled: Boolean
        get() {
            val locationMode = getLocationMode()
            return locationMode != Settings.Secure.LOCATION_MODE_OFF
        }

    override val isLocationRequired: Boolean
        get() {
            val requiredGeoDataSdk = 21
            return Build.VERSION.SDK_INT >= requiredGeoDataSdk
        }

    private fun getLocationMode(): Int {
        return try {
            Settings.Secure.getInt(_context.contentResolver, Settings.Secure.LOCATION_MODE)
        } catch (e: Settings.SettingNotFoundException) {
            e.printStackTrace()
            return 0
        }
    }
}